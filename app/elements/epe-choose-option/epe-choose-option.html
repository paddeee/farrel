<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="epe-choose-option">
  <style>
    :host {
      display: block;
    }

    paper-scroll-header-panel {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: var(--paper-grey-200);

    /* background for toolbar when it is at its full size */
    --paper-scroll-header-panel-full-header: {
       background-color: var(--dark-primary-color);
       background-image: url(../../images/header-bg.png);
     };

    /* background for toolbar when it is condensed */
    --paper-scroll-header-panel-condensed-header: {
       background-color: var(--default-primary-color);
     };
    }

    paper-toolbar.tall {
      background-color: transparent;
    }

    paper-toolbar.tall .title {
      font-size: 36px;
      margin-left: 60px;

      -webkit-transform-origin: left center;
      transform-origin: left center;
    }

    .bottom-title {
      font-size: 2.5vh;
    }

    .content {
      padding: 8px;
    }

    paper-card {
      cursor: pointer;
      margin: 16px;
    }

    .card-link {
      z-index: 1;
    }

    .icon-holder {
      color: var(--text-primary-color);
      height: 10vh;
      width: 10vh;
      border-radius: 50%;
      background: #ddd;
      line-height: 10vh;
      color: #666;
      text-align: center;
    }

    .icon-holder--import {
      background-color: var(--paper-teal-700);
    }

    .icon-holder--create {
      background-color: var(--paper-blue-700);
    }

    .icon-holder--view {
      background-color: var(--paper-deep-orange-700);
    }

    .icon-holder iron-icon {
      height: 6vh;
      width: 6vh;
    }
  </style>
  <template>

    <paper-scroll-header-panel condenses keep-condensed-header>

      <!-- Main Toolbar -->
      <paper-toolbar class="tall">
        <div class="flex"></div>

        <!-- Toolbar icons -->
        <paper-icon-button id="ImportButton" icon="file-upload"></paper-icon-button>
        <paper-icon-button id="CreateButton" icon="create"></paper-icon-button>
        <paper-icon-button id="ViewButton" icon="view-list"></paper-icon-button>

        <!-- paper-icon-buttons have an inherent padding that will push the tooltip down. offset undoes it -->
        <paper-tooltip for="ImportButton" offset="0">Import CaseMap File</paper-tooltip>
        <paper-tooltip for="CreateButton" offset="0">Create Package</paper-tooltip>
        <paper-tooltip for="ViewButton" offset="0">View Packages</paper-tooltip>

        <!-- Application name -->
        <div id="MiddleContainer" class="middle middle-container center horizontal layout">
          <div id="SectionName" class="section-name">What would you like to do?</div>
        </div>

        <!-- Application sub title -->
        <div id="BottomContainer" class="bottom bottom-container center horizontal layout">
          <div class="bottom-title paper-font-subhead">Special Investigation Task Force</div>
        </div>
      </paper-toolbar>

      <div class="content">

        <div class="layout vertical">

          <paper-card class="flex">
            <a data-route="import-parse" href="/import-parse" class="card-link fit block"></a>
            <div class="card-content">
              <div class="icon-holder  icon-holder--import">
                <iron-icon icon="file-upload"></iron-icon>
              </div>
              <h1>Import Casemap Data</h1>
              <p>Description</p>
            </div>

            <div class="card-actions">
              <paper-button>Some action</paper-button>
            </div>

          </paper-card>

          <paper-card class="flex">
            <a data-route="create-package" href="/create-package" class="card-link fit block"></a>
            <div class="card-content">

              <div class="icon-holder  icon-holder--create">
                <iron-icon icon="create"></iron-icon>
              </div>

              <h1>Create a Package</h1>
              <p>Description</p>
            </div>

            <div class="card-actions">
              <paper-button>Some action</paper-button>
            </div>
          </paper-card>

          <paper-card class="flex">
            <a data-route="view-packages" href="/view-packages" class="card-link fit block"></a>
            <div class="card-content">

              <div class="icon-holder  icon-holder--view">
                <iron-icon icon="view-list"></iron-icon>
              </div>

              <h1>View Packages</h1>
              <p>Description</p>
            </div>

            <div class="card-actions">
              <paper-button>Some action</paper-button>
            </div>
          </paper-card>

        </div>

      </div>

    </paper-scroll-header-panel>
  </template>
</dom-module>
<script>
(function() {
  Polymer({
    is: 'epe-choose-option',

    properties: {
      foo: {
        type: String,
        value: 'bar',
        notify: true
      }
    },

    ready: function() {

      addEventListener('paper-header-transform', function(e) {
        var sectionName = this.$.SectionName;
        var middleContainer = this.$.MiddleContainer;
        var bottomContainer = this.$.BottomContainer;
        var detail = e.detail;
        var heightDiff = detail.height - detail.condensedHeight;
        var yRatio = Math.min(1, detail.y / heightDiff);
        var maxMiddleScale = 0.50;  // appName max size when condensed. The smaller the number the smaller the condensed size.
        var scaleMiddle = Math.max(maxMiddleScale, (heightDiff - detail.y) / (heightDiff / (1-maxMiddleScale))  + maxMiddleScale);
        var scaleBottom = 1 - yRatio;

        // Move/translate middleContainer
        Polymer.Base.transform('translate3d(0,' + yRatio * 100 + '%,0)', middleContainer);

        // Scale bottomContainer and bottom sub title to nothing and back
        Polymer.Base.transform('scale(' + scaleBottom + ') translateZ(0)', bottomContainer);

        // Scale middleContainer appName
        Polymer.Base.transform('scale(' + scaleMiddle + ') translateZ(0)', sectionName);
      }.bind(this));
    }
  });
})();
</script>
