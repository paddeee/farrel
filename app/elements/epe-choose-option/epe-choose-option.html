<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="epe-choose-option">
  <style>
    :host {
      display: block;
    }

    .content {
      padding: 8px;
    }

    paper-card {
      cursor: pointer;
      margin: 16px;
    }

    .card-link {
      z-index: 1;
    }

    .icon-holder {
      color: var(--text-primary-color);
      height: 10vh;
      width: 10vh;
      border-radius: 50%;
      background: #ddd;
      line-height: 10vh;
      color: #666;
      text-align: center;
    }

    .icon-holder--import {
      background-color: var(--paper-teal-700);
    }

    .icon-holder--create {
      background-color: var(--paper-blue-700);
    }

    .icon-holder--view {
      background-color: var(--paper-deep-orange-700);
    }

    .icon-holder iron-icon {
      height: 6vh;
      width: 6vh;
    }
  </style>
  <template>

    <div class="content">

      <div class="layout vertical">

        <paper-card class="flex"
          hidden$="[[hideImport]]">
          <a data-route="import-parse" href="/import-parse" class="card-link fit block"></a>
          <div class="card-content">
            <div class="icon-holder  icon-holder--import">
              <iron-icon icon="file-upload"></iron-icon>
            </div>
            <h1>Import Casemap Data</h1>
            <p>Description</p>
          </div>

          <div class="card-actions">
            <paper-button>Some action</paper-button>
          </div>

        </paper-card>

        <paper-card class="flex">
          <a data-route="create-package/data-grid/Events" href="/create-package/data-grid/Events" class="card-link fit block"></a>
          <div class="card-content">

            <div class="icon-holder  icon-holder--create">
              <iron-icon icon="create"></iron-icon>
            </div>

            <h1>Create a Package</h1>
            <p>Description</p>
          </div>

          <div class="card-actions">
            <paper-button>Some action</paper-button>
          </div>
        </paper-card>

        <paper-card class="flex">
          <a data-route="view-packages" href="/view-packages" class="card-link fit block"></a>
          <div class="card-content">

            <div class="icon-holder  icon-holder--view">
              <iron-icon icon="view-list"></iron-icon>
            </div>

            <h1>View Packages</h1>
            <p>Description</p>
          </div>

          <div class="card-actions">
            <paper-button>Some action</paper-button>
          </div>
        </paper-card>
      </div>
    </div>
  </template>
</dom-module>
<script>
(function() {
  Polymer({
    is: 'epe-choose-option',

    properties: {

      user: {
        type: Object,
        value: null
      },

      hideImport: {
        type: Boolean,
        computed: 'isNotAdmin(user)'
      },

      sectionTitle: {
        type: String,
        value: 'What would you like to do?',
        notify: true
      }
    },

    ready: function() {

      // When the user data is updated, update our user
      this.userStore.listen(function(userData) {
        this.user = userData;
      }.bind(this));
    },

    // Called by parent element
    setSectionTitle: function() {
      this.sectionTitle = 'What would you like to do?';
    },

    // Hide import based on user role
    isNotAdmin: function(user) {
      if (user && user.role === 'admin') {
        return false;
      }
      return true;
    }
  });
})();
</script>
