<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="epe-create-package">
  <style>
    :host {
      display: block;
    }
  </style>
  <template>

    <paper-drawer-panel force-narrow id="paperDrawerPanel">

      <!-- Drawer Scroll Header Panel -->
      <paper-scroll-header-panel drawer fixed>

        <!-- Drawer Toolbar -->
        <paper-toolbar id="drawerToolbar">
          <span class="paper-font-title">Menu</span>
        </paper-toolbar>

        <!-- Drawer Content -->
        <paper-menu class="list" attr-for-selected="data-route" selected="[[route]]">
          <a data-route="home" href="/" on-click="onDataRouteClick">
            <iron-icon icon="home"></iron-icon>
            <span>Home</span>
          </a>

          <a data-route="users" href="/users" on-click="onDataRouteClick">
            <iron-icon icon="info"></iron-icon>
            <span>Users</span>
          </a>

          <a data-route="contact" href="/contact" on-click="onDataRouteClick">
            <iron-icon icon="mail"></iron-icon>
            <span>Contact</span>
          </a>
        </paper-menu>
      </paper-scroll-header-panel>

      <!-- Main Content -->
      <paper-scroll-header-panel main condenses keep-condensed-header>

        <!-- Main Toolbar -->
        <paper-toolbar class="tall">
          <paper-icon-button
            id="BackArrow"
            icon="arrow-back"
            on-tap="navigateBack"></paper-icon-button>
          <div class="flex"></div>

          <paper-tooltip for="BackArrow" offset="0">Back</paper-tooltip>

          <!-- Toolbar icons -->
          <a data-route="/import-parse" href="/import-parse">
            <paper-icon-button id="ImportButton" icon="file-upload"></paper-icon-button>
          </a>
          <a data-route="/create-package" href="/create-package">
            <paper-icon-button id="CreateButton" icon="create"></paper-icon-button>
          </a>
          <a data-route="/view-package" href="/view-package">
            <paper-icon-button id="ViewButton" icon="view-list"></paper-icon-button>
          </a>

          <!-- paper-icon-buttons have an inherent padding that will push the tooltip down. offset undoes it -->
          <paper-tooltip for="ImportButton" offset="0">Import CaseMap File</paper-tooltip>
          <paper-tooltip for="CreateButton" offset="0">Create Package</paper-tooltip>
          <paper-tooltip for="ViewButton" offset="0">View Packages</paper-tooltip>

          <!-- Application name -->
          <div id="MiddleContainer" class="middle middle-container center horizontal layout">
            <div id="SectionName" class="section-name"><span>[[sectionTitle]]</span></div>
          </div>

          <!-- Application sub title -->
          <div id="BottomContainer" class="bottom bottom-container center horizontal layout">
            <div class="bottom-title paper-font-subhead">Special Investigation Task Force</div>
          </div>
        </paper-toolbar>

        <iron-pages
          class="main-content"
          attr-for-selected="data-route"
          selected="{{importRoute}}"
          on-iron-select="setSectionTitle">

          <!-- Import Parse -->
          <section data-route="import-parse" class="import-area layout horizontal">

            <!-- File Import Selector -->
            <div class="flex-1 relative radio-container">
              <paper-material class="card fit">
                <paper-radio-group class=" layout vertical" selected="{{importedFileType}}">
                  <paper-radio-button name="Events">Events</paper-radio-button>
                  <paper-radio-button name="People">People</paper-radio-button>
                  <paper-radio-button name="Places">Places</paper-radio-button>
                  <paper-radio-button name="Source">Source</paper-radio-button>
                </paper-radio-group>
              </paper-material>
            </div>

            <!-- Drag & Drop CSV Import -->
            <div class="flex-3  parse-import-holder">
              <div class="no-import-selected horizontal layout center"
                   showing$="[[!isFileTypeSelected]]">
                <p>Please choose a type of CaseMap File to Import.</p>
              </div>

              <paper-material
                class="card parse-import"
                elevation="1"
                showing$="[[isFileTypeSelected]]">

                <epe-parse-spreadsheet
                  import-actions="[[importActions]]"
                  import-store="[[importStore]]"
                  packaged-app="[[packagedApp]]"
                  csv-type="[[importedFileType]]"
                  csv-parser="[[csvParser]]"
                  on-import-finished="importFinishedHandler">
                </epe-parse-spreadsheet>
              </paper-material>
            </div>
          </section>

          <!-- Import Check -->
          <section data-route="import-check" class="import-check">
            <epe-import-check
              id="EpeImportCheck"
              filter-state-actions="[[filterStateActions]]"
              events-store="[[eventsStore]]"
              places-store="[[placesStore]]"
              people-store="[[peopleStore]]"
              source-store="[[sourceStore]]"></epe-import-check>
          </section>
        </iron-pages>
      </paper-scroll-header-panel>
    </paper-drawer-panel>
  </template>
</dom-module>
<script>
(function() {
  Polymer({
    is: 'epe-create-package',

    properties: {
      foo: {
        type: String,
        value: 'bar',
        notify: true
      }
    }
  });
})();
</script>
